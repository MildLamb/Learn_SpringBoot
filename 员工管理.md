## 拦截器
- 自定义拦截器实现 HandlerInterceptor 接口
```java
public class LoginHandlerInterceptor implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {

        //登录成功后应该有用户的session
        Object loginUser = request.getSession().getAttribute("loginUser");
        if (loginUser != null){
            return true;
        }else {
            request.setAttribute("msg","没有权限，请先登录");
            request.getRequestDispatcher("/index.html").forward(request,response);
            return false;
        }
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {

    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {

    }
}
```
- 在自定义MVC配置中配置注册自己的拦截器
```java
@Configuration
public class MyMvcConfig implements WebMvcConfigurer {
    //自定义国际化组件
    @Bean
    public LocaleResolver localeResolver(){
        return new MyLocaleResolver();
    }

    //注册自己的拦截器 配置拦截规则
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new LoginHandlerInterceptor())
                .addPathPatterns("/**")
                .excludePathPatterns("/index","/","/index.html","/user/login","/assets/**");
    }
}
```
## 员工列表展示
- 公共页面提取 th:fragment="模块名称"
```html
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!-- 顶部导航栏 -->
<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0" th:fragment="header">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="http://getbootstrap.com/docs/4.0/examples/dashboard/#" th:text="${session.loginUser}"></a>
    <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
    <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
            <a class="nav-link" href="http://getbootstrap.com/docs/4.0/examples/dashboard/#">退出登录</a>
        </li>
    </ul>
</nav>

<!-- 侧边栏 -->
<nav class="col-md-2 d-none d-md-block bg-light sidebar" th:fragment="sidebar">
  ....  ....
</nav>

</html>
```
- 其他页面引入模块
  - th:include
  - th:replace
  - th:insert
  - 格式 th:insert/include/replace="~{公共模板位置::模块名称}"
```html
	<body>
		<div th:replace="~{commons/common::header}"></div>

		<div class="container-fluid">
			<div class="row">

				<!-- 传递参数给组件，判断高亮效果 -->
				<div th:replace="~{commons/common::sidebar(active='main.html')}"></div>


	</body>

</html>
```

- 实现点哪模块哪模块高亮
  - 每一个模板都携带一个active属性，交给公共页面去判断，判断谁高亮
